#!/bin/sh

gen() {
	cat <<-EOF
	source '$(which virtualenvwrapper.sh)'
	workon blixem
	test $1 = be && sleep 2
	test $1 = sh || ./dev/$1 run
	clear
	EOF
}

tmux \
	new-session -s blixem \; \
	rename-window sh  \; new-window \; \
	rename-window fe  \; new-window \; \
	rename-window be  \; new-window \; \
	rename-window ds  \; new-window \; \
	rename-window gcs \; \
	select-window -t sh \; \
	send-keys -t sh  "$(gen sh)"  C-m \; \
	send-keys -t fe  "$(gen fe)"  C-m \; \
	send-keys -t be  "$(gen be)"  C-m \; \
	send-keys -t ds  "$(gen ds)"  C-m \; \
	send-keys -t gcs "$(gen gcs)" C-m \; \
